---
import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card";
import { getCollection } from "astro:content";

const rawBlogPosts = await getCollection("blog");

const blogPosts = rawBlogPosts.sort((postA, postB) => {
  if (postA.data.publishDate < postB.data.publishDate) {
    return 1;
  }

  if (postA.data.publishDate > postB.data.publishDate) {
    return -1;
  }

  return 0;
});
---

<div class="flex flex-col lg:flex-row">
  <div class="flex-auto main-content pt-10 pb-10 px-4 w-screen sm:w-full">
    <div class="prose lg:prose-xl dark:prose-invert mx-auto" data-pagefind-body>
      <slot />
    </div>
  </div>

  <div class="lg:w-80 p-4 pt-10">
    <h3 class="font-bold">Recent Posts</h3>
    <ul class="pl-6">
      {
        blogPosts.map((blogPost) => (
          <li>
            <a class="truncate" href={`/blog/${blogPost.slug}`}>
              {blogPost.data?.title || "hmmm"}
            </a>
          </li>
        ))
      }
    </ul>
  </div>
</div>
